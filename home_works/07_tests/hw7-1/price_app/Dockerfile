# Устанавливаем базовый образ Docker на основе Ruby 3.0 на Alpine Linux
FROM ruby:3.0-alpine

# Определяем переменную окружения SRC_PATH и устанавливаем ей значение /hw1
ENV SRC_PATH /hw1

# Устанавливаем рабочую директорию в /hw1, это будет директория, из которой будут запускаться будущие команды
WORKDIR $SRC_PATH

# Копируем файлы Gemfile и Gemfile.lock из локальной директории внутрь контейнера в директорию /hw1
COPY ./Gemfile* $SRC_PATH/

# Устанавливаем зависимости, перечисленные в Gemfile, с помощью Bundler
RUN bundle install

# Копируем содержимое текущей директории (все файлы и папки) из локальной машины внутрь контейнера в директорию /hw1
COPY . .

# Определяем команду по умолчанию, которая будет выполняться при запуске контейнера
# В данном случае, запускается скрипт http-server.rb с использованием интерпретатора Ruby
CMD ["ruby", "http-server.rb"]

# Указывает, какой порт будет слушать приложение в контейнере
EXPOSE 5678
